{"version":3,"sources":["D:/dev/wym-test/test3/src/scripts/constants/ActionTypes.js","D:/dev/wym-test/test3/src/scripts/actions/dataLoad.js","D:/dev/wym-test/test3/src/scripts/components/ajax/index.js","D:/dev/wym-test/test3/src/scripts/actions/indexList.js","D:/dev/wym-test/test3/src/scripts/actions/pagination.js","D:/dev/wym-test/test3/src/scripts/components/indexList/nav.js","D:/dev/wym-test/test3/src/scripts/util/tool.js","D:/dev/wym-test/test3/src/scripts/components/common/index.js","D:/dev/wym-test/test3/src/scripts/components/indexList/listItem.js","D:/dev/wym-test/test3/src/scripts/components/indexList/index.js","D:/dev/wym-test/test3/src/scripts/containers/listApp/index.js","D:/dev/wym-test/test3/src/scripts/actions/login.js","D:/dev/wym-test/test3/src/scripts/components/login/index.js","D:/dev/wym-test/test3/src/scripts/containers/loginApp/index.js","D:/dev/wym-test/test3/src/scripts/components/loginout/index.js","D:/dev/wym-test/test3/src/scripts/containers/logoutApp/index.js","D:/dev/wym-test/test3/src/scripts/actions/message.js","D:/dev/wym-test/test3/src/scripts/components/message/index.js","D:/dev/wym-test/test3/src/scripts/containers/messagesApp/index.js","D:/dev/wym-test/test3/src/scripts/actions/topic.js","D:/dev/wym-test/test3/src/scripts/components/topic/replyBox.js","D:/dev/wym-test/test3/src/scripts/components/topic/reList.js","D:/dev/wym-test/test3/src/scripts/components/topic/index.js","D:/dev/wym-test/test3/src/scripts/containers/topicApp/index.js","D:/dev/wym-test/test3/src/scripts/components/topicCreate/index.js","D:/dev/wym-test/test3/src/scripts/containers/topicCreateApp/index.js","D:/dev/wym-test/test3/src/scripts/actions/userInfo.js","D:/dev/wym-test/test3/src/scripts/components/user/homeList.js","D:/dev/wym-test/test3/src/scripts/components/user/index.js","D:/dev/wym-test/test3/src/scripts/containers/userApp/index.js","D:/dev/wym-test/test3/src/scripts/reducers/indexList/initialState.js","D:/dev/wym-test/test3/src/scripts/reducers/load/initialState.js","D:/dev/wym-test/test3/src/scripts/reducers/topic/initialState.js","D:/dev/wym-test/test3/src/scripts/reducers/pagination/initialState.js","D:/dev/wym-test/test3/src/scripts/reducers/user/initialState.js","D:/dev/wym-test/test3/src/scripts/reducers/messages/initialState.js","D:/dev/wym-test/test3/src/scripts/reducers/index.js","D:/dev/wym-test/test3/src/scripts/reducers/indexList/index.js","D:/dev/wym-test/test3/src/scripts/reducers/topic/index.js","D:/dev/wym-test/test3/src/scripts/reducers/pagination/index.js","D:/dev/wym-test/test3/src/scripts/reducers/user/index.js","D:/dev/wym-test/test3/src/scripts/reducers/messages/index.js","D:/dev/wym-test/test3/src/scripts/reducers/load/index.js","D:/dev/wym-test/test3/src/scripts/store/index.js","D:/dev/wym-test/test3/src/scripts/Main.js","D:/dev/wym-test/test3/src/registerServiceWorker.js","D:/dev/wym-test/test3/src/index.js"],"names":["ACTION_PREFIX","SET_INDEXLIST","CLEAR_INDEXLIST","SET_DATALOAD","SET_LOADFAIL","SET_LOADMSG","SET_TOPIC","SET_REPLYBOX_DISPLAY","SET_ZAN","SET_CURRENTPAGE","SET_SCROLL_POSITION","SET_USERINFO","SET_MESSAGE","setload","data","type","setloadFail","setloadMsg","ajax","dispatch","mySetting","setting","method","timeout","url","needLoad","success","error","key","axios_default","responseType","then","ret","status","catch","getIndexList","page","limit","tab","getState","setIndexList","alert","error_msg","clearIndexList","setCurrPage","setScrollPos","nav_Nav","_Component","Nav","classCallCheck_default","this","possibleConstructorReturn_default","__proto__","get_prototype_of_default","apply","arguments","inherits_default","createClass_default","value","np","props","setCur","react_default","a","createElement","className","all","es","to","good","share","ask","job","react","propTypes","prop_types_default","string","isRequired","Tool","formatDate","str","date","Date","time","getTime","parseInt","localItem","length","localStorage","getItem","setItem","removeLocalItem","removeItem","reachBottom","scrollTop","document","documentElement","body","clientHeight","Math","min","max","scrollHeight","common_DataLoad","DataLoad","_props","loadingData","loadFailed","msg","bool","common_TabIcon","_Component2","TabIcon","_props2","top","common_TipMsgSignin","_Component3","TipMsgSignin","common_UserHeadImg","_Component4","UserHeadImg","style","backgroundImage","common_Header","_Component5","Header","_ref","_temp","_this5","_ret","_len","args","Array","_key","call","concat","goback","history","go","_props3","title","leftTo","leftIcon","rightTo","rightIcon","rightClick","left","onClick","right","contextTypes","router","object","common_Footer","_Component6","Footer","User","JSON","parse","myUrl","loginname","arr","index","defaultProps","listItem_ListItem","ListItem","id","author","visit_count","reply_count","create_at","last_reply_at","avatar_url","number","indexList_List","List","list","map","item","extends_default","array","listApp_ListApp","ListApp","context","_this","initPath","handleScroll","bind","location","pathname","search","path","window","addEventListener","pagination","loadData","scrollTo","scrollX","scrollY","loadState","loadPage","actions","replace","changeTab","nextProps","nextState","removeEventListener","listApp","Object","react_redux_es","state","indexList","load","redux","assign_default","indexList_namespaceObject","pagination_namespaceObject","login","accesstoken","user","stringify_default","login_Login","Login","e","loginClick","refs","_this2","btnName","ref","placeholder","handleClick","func","loginApp_LoginApp","LoginApp","button","setState","push","_this3","handleLogin","loginApp","login_namespaceObject","loginout_LoginOut","LoginOut","loginOut","data-flex","logoutApp_LoginOutApp","LoginOutApp","handleLoginout","logoutApp","getUserInfo","messageList","has_read_messages","hasnot_read_messages","setUserInfo","message_Message","Message","topic","reply","has_read","content","messagesApp_MessageApp","MessageApp","main","messagesApp","messages","message_namespaceObject","getTopicDetail","setTopicDetail","setReplybox","setClickZan","uid","setZan","action","submitReply","reply_id ","reply_id","createTopic","replyBox_ReplyBox","ReplyBox","submit","display","reList_ReList","ReList","isUp","i","clickZan","showReplyBox","ups","upState","dangerouslySetInnerHTML","__html","handleClickZan","topic_Article","Article","replies","bottom","data-flex-box","topicApp_TopicApp","TopicApp","match","params","isReload","topicDetail","_this4","_props4","topicApp","topic_namespaceObject","topicCreate_NewTopic","NewTopic","tabInput","titleInput","contentInput","name","defaultValue","onInput","topicCreateApp_TopicCreateApp","TopicCreateApp","target","topic_id","headerSet","topicCreateApp","userInfo_getUserInfo","userInfo_setUserInfo","homeList_HomeList","HomeList","user_Home","Home","tabIndex","score","recent_topics","recent_replies","arrOn","arrDisplay","userApp_UserApp","UserApp","footer","userApp","userInfo","userInfo_namespaceObject","initialState","load_initialState","topic_initialState","pagination_initialState","user_initialState","messages_initialState","reducers","undefined","toConsumableArray_default","splice","scripts_reducers","middle","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","redux_thunk_es","moment_default","locale","preloadedState","Main_store","Main_history","createBrowserHistory_default","scripts_Main","locale_provider","zh_CN_default","store","component","isLocalhost","Boolean","hostname","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","react_dom_default","render","getElementById","URL","origin","fetch","response","headers","get","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/app.1.0.0.1261c0fdb1a07c64df1a.js","sourcesContent":["//action前缀\r\nexport const ACTION_PREFIX = 'https://cnodejs.org';\r\n//首页indexList\r\nexport const SET_INDEXLIST = 'SET_INDEXLIST';\r\nexport const CLEAR_INDEXLIST = 'CLEAR_INDEXLIST';\r\n//设置load状态\r\nexport const SET_DATALOAD = 'SET_DATALOAD';\r\nexport const SET_LOADFAIL = 'SET_LOADFAIL';\r\nexport const SET_LOADMSG = 'SET_LOADMSG';\r\n//设置topic\r\nexport const SET_TOPIC = 'SET_TOPIC';\r\nexport const SET_REPLYBOX_DISPLAY = 'SET_REPLYBOX_DISPLAY';\r\nexport const SET_ZAN = 'SET_ZAN';\r\n\r\n//设置分页状态\r\nexport const SET_CURRENTPAGE = 'SET_CURRENTPAGE';\r\nexport const SET_SCROLL_POSITION = 'SET_SCROLL_POSITION';\r\n//查看用户信息\r\nexport const SET_USERINFO = 'SET_USERINFO';\r\n//设置消息内容\r\nexport const SET_MESSAGE = 'SET_MESSAGE';\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/constants/ActionTypes.js","import * as types from '../constants/ActionTypes';\r\nexport function setload(data) {\r\n  return {\r\n    type: types.SET_DATALOAD,\r\n    data,\r\n  };\r\n}\r\nexport function setloadFail(data) {\r\n  return {\r\n    type: types.SET_LOADFAIL,\r\n    data,\r\n  };\r\n}\r\nexport function setloadMsg(data) {\r\n  return {\r\n    type: types.SET_LOADMSG,\r\n    data,\r\n  };\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/actions/dataLoad.js","import * as loadAction from '../../actions/dataLoad';\r\nimport axios from 'axios';\r\n/**\r\n * 封装axios\r\n * @param dispatch 父组件action传递的dispatch\r\n * @param mySetting 配置参数\r\n * @returns {Promise.<T>}\r\n */\r\nexport default function(dispatch, mySetting) {\r\n\r\n  var setting = {\r\n    method: 'get', //请求类型\r\n    type: 'json', //返回值类型\r\n    timeout: 5000, //超时时间\r\n    url: '', //请求地址\r\n    needLoad: true, //是否需要加载动画，默认为true\r\n    data: null, //发送给服务器的数据\r\n    success: null, //请求成功后执行的方法\r\n    error: null, //请求失败后执行的方法\r\n  };\r\n    /**\r\n     * 覆盖默认设置\r\n     */\r\n  for (let key in mySetting) {\r\n    setting[key] = mySetting[key];\r\n  }\r\n  //设置加载状态，隐藏错误信息\r\n  dispatch(loadAction.setloadFail(false));\r\n  setting.needLoad && dispatch(loadAction.setload(true));\r\n  return (function(dispatch, setting) {\r\n    return axios({\r\n      method: setting.method,\r\n      responseType: setting.type,\r\n      timeout: setting.timeout,\r\n      data: setting.data,\r\n      url: setting.url,\r\n    });\r\n  })(dispatch, setting).then((ret) => {\r\n    dispatch(loadAction.setload(false));\r\n    if (ret.status === 200) {\r\n      if (ret.data.success) {\r\n        //加载成功，没有异常\r\n        setting.success && setting.success(ret);\r\n        return ret;\r\n      } else {\r\n        //请求成功，但是有异常\r\n        dispatch(loadAction.setloadMsg('系统繁忙，请稍后再试！'));\r\n        dispatch(loadAction.setloadFail(true));\r\n        return false;\r\n      }\r\n    } else {\r\n      //请求失败\r\n      dispatch(loadAction.setloadMsg('请求失败，请稍后再试！'));\r\n      dispatch(loadAction.setloadFail(true));\r\n      return false;\r\n    }\r\n  }).catch(function(error) {\r\n    //有异常，或者网络不通\r\n    setting.error && setting.error(error);\r\n    dispatch(loadAction.setloadMsg('网络异常，请稍后再试！'));\r\n    dispatch(loadAction.setloadFail(true));\r\n    dispatch(loadAction.setload(false));\r\n    return false;\r\n  });\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/components/ajax/index.js","import * as types from '../constants/ActionTypes';\r\nimport ajax from '../components/ajax';\r\n\r\n/**\r\n * 获取list数据\r\n * @param page 页码\r\n * @param limit 每页显示多少条数据\r\n * @param tab   tab页参数\r\n * @returns {Function}\r\n */\r\nexport function getIndexList(page, limit, tab) {\r\n  return function(dispatch, getState) {\r\n    return ajax(dispatch, {\r\n      method: 'get', //请求类型\r\n      url: types.ACTION_PREFIX + '/api/v1/topics?tab=' \r\n      + tab + '&page=' + page + '&limit=' + limit, //请求地址\r\n      data: null, //发送给服务器的数据\r\n      success: function(ret) {\r\n        dispatch(setIndexList(ret.data.data));\r\n      }, //请求成功后执行的方法\r\n      error: function(error) {\r\n        alert(error.data.error_msg);\r\n      }, //请求失败后执行的方法\r\n    });\r\n  };\r\n}\r\nexport function setIndexList(data) {\r\n  return {\r\n    type: types.SET_INDEXLIST,\r\n    data,\r\n  };\r\n}\r\n//清空indexList\r\nexport function clearIndexList() {\r\n  return {\r\n    type: types.CLEAR_INDEXLIST,\r\n  };\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/actions/indexList.js","import * as types from '../constants/ActionTypes';\r\n//设置当前页\r\nexport function setCurrPage(data) {\r\n  return {\r\n    type: types.SET_CURRENTPAGE,\r\n    data,\r\n  };\r\n}\r\n//设置scroll的位置\r\nexport function setScrollPos(data) {\r\n  return {\r\n    type: types.SET_SCROLL_POSITION,\r\n    data,\r\n  };\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/actions/pagination.js","import React, {Component} from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport './nav.less';\r\nimport PropTypes from 'prop-types';\r\n/**\r\n * 头部导航条\r\n */\r\nexport class Nav extends Component {\r\n  shouldComponentUpdate(np) {\r\n    return this.props.tab !== np.tab; //tab和之前的不一致，组件才需要更新，否则不更新，提升性能\r\n  }\r\n  render() {\r\n    const {tab} = this.props;\r\n    let setCur = {};\r\n    setCur[tab] = 'on';\r\n    /*let tab = this.props.location.query.tab || 'all';\r\n        传递的时候container这么写\r\n        * */\r\n    return (\r\n      <nav className=\"index-nav\">\r\n        <ul>\r\n          <li className={setCur.all}>\r\n            <Link to=\"/\">全部</Link>\r\n          </li>\r\n          <li className={setCur.good}>\r\n            <Link to=\"/?tab=good\">精华</Link>\r\n          </li>\r\n          <li className={setCur.share}>\r\n            <Link to=\"/?tab=share\">分享</Link>\r\n          </li>\r\n          <li className={setCur.ask}>\r\n            <Link to=\"/?tab=ask\">问答</Link>\r\n          </li>\r\n          <li className={setCur.job}>\r\n            <Link to=\"/?tab=job\">招聘</Link>\r\n          </li>\r\n        </ul>\r\n        <div className=\"height\"></div>\r\n      </nav>\r\n    );\r\n  }\r\n}\r\nNav.propTypes = {\r\n  tab: PropTypes.string.isRequired,  //tab标题\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/components/indexList/nav.js","const Tool = {};\r\n/**\r\n * 格式化时间\r\n * @param {any} t\r\n * @returns\r\n */\r\nTool.formatDate = function(str) {\r\n  var date = new Date(str);\r\n  var time = new Date().getTime() - date.getTime(); //现在的时间-传入的时间 = 相差的时间（单位 = 毫秒）\r\n  if (time < 0) {\r\n    return '';\r\n  } else if (time / 1000 < 60) {\r\n    return parseInt((time / 1000)) + '秒前';\r\n  } else if ((time / 60000) < 60) {\r\n    return parseInt((time / 60000)) + '分钟前';\r\n  } else if ((time / 3600000) < 24) {\r\n    return parseInt(time / 3600000) + '小时前';\r\n  } else if ((time / 86400000) < 31) {\r\n    return parseInt(time / 86400000) + '天前';\r\n  } else if ((time / 2592000000) < 12) {\r\n    return parseInt(time / 2592000000) + '月前';\r\n  } else {\r\n    return parseInt(time / 31536000000) + '年前';\r\n  }\r\n};\r\n/**\r\n * 本地数据存储或读取\r\n *\r\n * @param {any} key\r\n * @param {any} value\r\n * @returns\r\n */\r\nTool.localItem = function(key, value) {\r\n  if (arguments.length == 1) {\r\n    return localStorage.getItem(key);\r\n  } else {\r\n    return localStorage.setItem(key, value);\r\n  }\r\n};\r\n\r\n/**\r\n * 删除本地数据\r\n *\r\n * @param {any} key\r\n * @returns\r\n */\r\nTool.removeLocalItem = function(key) {\r\n  if (key) {\r\n    return localStorage.removeItem(key);\r\n  }\r\n  return localStorage.removeItem();\r\n};\r\n\r\n//获取滚动条当前的位置\r\nfunction getScrollTop() {\r\n  let scrollTop = 0;\r\n  if (document.documentElement && document.documentElement.scrollTop) {\r\n    scrollTop = document.documentElement.scrollTop;\r\n  } else if (document.body) {\r\n    scrollTop = document.body.scrollTop;\r\n  }\r\n  return scrollTop;\r\n}\r\n//获取当前可视范围的高度\r\nfunction getClientHeight() {\r\n  let clientHeight = 0;\r\n  if (document.body.clientHeight && document.documentElement.clientHeight) {\r\n    clientHeight = Math.min(document.body.clientHeight, document.documentElement.clientHeight);\r\n  } else {\r\n    clientHeight = Math.max(document.body.clientHeight, document.documentElement.clientHeight);\r\n  }\r\n  return clientHeight;\r\n}\r\n//获取文档完整的高度\r\nfunction getScrollHeight() {\r\n  return Math.max(document.body.scrollHeight, document.documentElement.scrollHeight);\r\n}\r\n/**\r\n * 判断是否滚动到底部\r\n * @returns {boolean}\r\n */\r\nTool.reachBottom = function() {\r\n  return ((getScrollTop() + getClientHeight()) / getScrollHeight() >= 0.98);\r\n};\r\nexport {Tool};\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/util/tool.js","/**\r\n * 通用小组件\r\n */\r\nimport React, {Component} from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport {Tool} from '../../util/tool';\r\nimport './index.less';\r\nimport PropTypes from 'prop-types';\r\n/**\r\n * 加载动画 DataLoad\r\n */\r\nexport class DataLoad extends Component {\r\n  render() {\r\n    const {loadingData, loadFailed, msg} = this.props;\r\n    return (\r\n      <div>\r\n        <div className={'data-load data-load-' + loadingData}>\r\n        </div>\r\n        <p className={'data-tips-' + loadFailed}>{msg}</p>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nDataLoad.propTypes = {\r\n  loadingData: PropTypes.bool,  //是否在加载数据\r\n  loadFailed: PropTypes.bool,  //是否加载失败\r\n  msg: PropTypes.string,  //加载失败提示语\r\n};\r\n/**\r\n * 生成主题类型小图标\r\n */\r\nexport class TabIcon extends Component {\r\n  render() {\r\n    var {tab, top, good} = this.props;\r\n    if (top) {\r\n      tab = 'top';\r\n    } else if (good) {\r\n      tab = 'good';\r\n    }\r\n    return (\r\n      <i className={'iconfont icon-' + tab}></i>\r\n    );\r\n  }\r\n}\r\nTabIcon.propTypes = {\r\n  tab: PropTypes.string,  //tab标题\r\n  top: PropTypes.bool,  //是否置顶\r\n  good: PropTypes.bool,  //是否是精华\r\n};\r\n/**\r\n * 提示登录\r\n *\r\n * @export\r\n * @class TipMsgSignin\r\n * @extends {Component}\r\n */\r\nexport class TipMsgSignin extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"tip-msg-signin\">\r\n                你还未登录，请先<Link to=\"/login\">登录</Link>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n/**\r\n * 用户头像\r\n */\r\nexport class UserHeadImg extends Component {\r\n  render() {\r\n    const {url} = this.props;\r\n    return (<div className=\"user-headimg\" \r\n      style={{ backgroundImage: 'url(' + url + ')' }}></div>);\r\n  }\r\n}\r\nUserHeadImg.propTypes = {\r\n  url: PropTypes.string,  //用户头像地址\r\n};\r\n\r\n/**\r\n * 公共头部\r\n */\r\nexport class Header extends Component {\r\n\r\n    goback=() => {\r\n      history.go(-1);\r\n    }\r\n    render() {\r\n      let {title, leftTo, leftIcon, rightTo, rightIcon, \r\n        rightClick } = this.props;\r\n      let left = null;\r\n\r\n      if (leftTo && leftIcon) {\r\n        left = (\r\n          <Link to={leftTo}>\r\n            <i className={'iconfont icon-' + leftIcon}></i>\r\n          </Link>\r\n        );\r\n      } else if (leftIcon === 'fanhui') { //返回上一页\r\n        left = (\r\n          <a onClick={this.goback}>\r\n            <i className={'iconfont icon-' + leftIcon}></i>\r\n          </a>\r\n        );\r\n      }\r\n\r\n      let right = null;\r\n      if (rightTo && rightIcon) {\r\n        right = (\r\n          <Link to={rightTo}>\r\n            <i className={'iconfont icon-' + rightIcon}></i>\r\n          </Link>\r\n        );\r\n      } else if (rightClick && rightIcon) {\r\n        right = (\r\n          <div onClick={rightClick}>\r\n            <i className={'iconfont icon-' + rightIcon}></i>\r\n          </div>\r\n        );\r\n      }\r\n      return (\r\n        <header className=\"common-header\">\r\n          <div className=\"icon\">\r\n            {left}\r\n          </div>\r\n          <h2 className=\"title\">{title}</h2>\r\n          <div className=\"icon\">\r\n            {right}\r\n          </div>\r\n        </header>\r\n      );\r\n    }\r\n}\r\nHeader.contextTypes = {\r\n  router: PropTypes.object.isRequired,\r\n};\r\n/**\r\n * 底部菜单导航栏\r\n */\r\nexport class Footer extends Component {\r\n  render() {\r\n    var User = JSON.parse(Tool.localItem('User'));\r\n    var myUrl = User && User.loginname ? '/user/' + User.loginname : '/login';\r\n    var arr = [];\r\n    arr[this.props.index] = 'on';\r\n    return (\r\n      <footer className=\"common-footer\">\r\n        <div className=\"zhanwei\"></div>\r\n        <ul className=\"menu\">\r\n          <li className={arr[0]}>\r\n            <Link to=\"/\">\r\n              <i className=\"iconfont icon-shouye\"></i>首页\r\n            </Link>\r\n          </li>\r\n          <li className={arr[1]}>\r\n            <Link to=\"/topic/create\">\r\n              <i className=\"iconfont icon-fabu\"></i>发表\r\n            </Link>\r\n          </li>\r\n          <li className={arr[2]}>\r\n            <Link to=\"/my/messages\">\r\n              <i className=\"iconfont icon-xiaoxi\"></i>消息\r\n            </Link>\r\n          </li>\r\n          <li className={arr[3]}>\r\n            <Link to={myUrl}>\r\n              <i className=\"iconfont icon-wode\"></i>我的\r\n            </Link>\r\n          </li>\r\n        </ul>\r\n      </footer>\r\n    );\r\n  }\r\n  shouldComponentUpdate(np) {\r\n    return this.props.index !== np.index; //防止组件不必要的更新\r\n  }\r\n}\r\nFooter.propTypes = {\r\n  index: PropTypes.string,  //选中状态的序号\r\n};\r\nFooter.defaultProps = {\r\n  index: 0,\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/components/common/index.js","import React, {Component} from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport {Tool} from '../../util/tool';\r\nimport {UserHeadImg, TabIcon} from '../common';\r\nimport PropTypes from 'prop-types';\r\n/**\r\n * 列表单独项\r\n */\r\nexport class ListItem extends Component {\r\n  render() {\r\n    const {id, title, author, visit_count, reply_count, \r\n      create_at, last_reply_at} = this.props;\r\n    return (\r\n      <li>\r\n        <Link to={'/topic/' + id}>\r\n          <div className=\"list-title\">\r\n            <div className=\"font\"><TabIcon {...this.props} /></div>\r\n            <h3 className=\"tit\">{title}</h3>\r\n          </div>\r\n          <div className=\"bottom\">\r\n            <div className=\"author\">\r\n              <UserHeadImg url={author.avatar_url}/>\r\n            </div>\r\n            <div className=\"con\">\r\n              <p className=\"bottom-tip\">\r\n                <span className=\"name\">{author.loginname}</span>\r\n                <span className=\"count\">{reply_count}/{visit_count}</span>\r\n              </p>\r\n              <p className=\"bottom-tip\">\r\n                <time className=\"create\">{Tool.formatDate(create_at) }</time>\r\n                <time className=\"re\">{Tool.formatDate(last_reply_at) }</time>\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </Link>\r\n      </li>\r\n    );\r\n  }\r\n  shouldComponentUpdate(np) {\r\n    //因为列表项目不会更新，所以不需要重新渲染\r\n    return false;\r\n  }\r\n}\r\nListItem.propTypes = {\r\n  id: PropTypes.string.isRequired,  //主题ID\r\n  title: PropTypes.string.isRequired,  //主题标题\r\n  author: PropTypes.object.isRequired,  //作者\r\n  visit_count: PropTypes.number.isRequired,  //访问量\r\n  reply_count: PropTypes.number.isRequired,  //回复量\r\n  create_at: PropTypes.string.isRequired,  //创建时间\r\n  last_reply_at: PropTypes.string.isRequired,  //最后回复时间\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/components/indexList/listItem.js","import React, {Component} from 'react';\r\nimport {ListItem} from  './listItem';\r\nimport './index.less';\r\nimport PropTypes from 'prop-types';\r\n/**\r\n * 循环列表\r\n */\r\nexport class List extends Component {\r\n  render() {\r\n    const {list} = this.props;\r\n    return (\r\n      <ul className=\"index-list\">\r\n        {\r\n          list.map((item, index) => {\r\n            return <ListItem key={item.id} {...item}/>;\r\n          })\r\n        }\r\n      </ul>\r\n    );\r\n  }\r\n}\r\nList.propTypes = {\r\n  list: PropTypes.array.isRequired,  //首页主题集合\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/components/indexList/index.js","import React, {Component} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport * as listAction from '../../actions/indexList';\r\nimport * as pageAction from '../../actions/pagination';\r\nimport {Nav} from '../../components/indexList/nav';\r\nimport {DataLoad, Footer} from '../../components/common';\r\nimport {List} from '../../components/indexList';\r\nimport {Tool} from '../../util/tool';\r\nimport PropTypes from 'prop-types';\r\nclass ListApp extends Component {\r\n  constructor(props, context) {\r\n    super(props, context);\r\n    this.initPath(props);\r\n    this.handleScroll = this.handleScroll.bind(this);\r\n  }\r\n\r\n  /**\r\n     * 初始化路径，用于tab改变的时候作比较刷新页面\r\n     * @param props\r\n     */\r\n  initPath(props) {\r\n    var {location} = props;\r\n    var {pathname, search} = location;\r\n    this.path = pathname + search;\r\n  }\r\n\r\n  componentDidMount() {\r\n    window.addEventListener('scroll', this.handleScroll);\r\n    const {pagination} = this.props;\r\n    if (pagination.page === 0) {\r\n      //只有当前页为0的时候才触发加载数据\r\n      this.loadData();\r\n    } else {\r\n      //是从别的页面返回到列表页的，需要恢复原来滚动条的位置\r\n      window.scrollTo(pagination.scrollX, pagination.scrollY);\r\n    }\r\n  }\r\n\r\n  /**\r\n     * 处理页面滚动加载的方法\r\n     */\r\n  handleScroll() {\r\n    if (Tool.reachBottom()) {\r\n      //到达底部，分页加载数据\r\n      const {loadState} = this.props;\r\n      if (!loadState) {\r\n        this.loadData();\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n     * 用于加载数据，如果不传np参数，则默认加载当前页的props里的tab参数\r\n     * 如果传递np，则加载np里的tab参数\r\n     * @param [np] nextProps\r\n     * @param [page]  指定加载某一页数据\r\n     */\r\n  loadData(np, page) {\r\n    const {actions, pagination} = this.props;\r\n    let tab = '';\r\n    if (!np) {\r\n      //tab = this.props.location.query.tab || 'all';\r\n      tab = (this.props.location.search || 'all').replace(/\\?tab=/, '');\r\n    } else {\r\n      //tab = np.location.query.tab || 'all';\r\n      tab = (this.props.location.search || 'all').replace(/\\?tab=/, '');\r\n    }\r\n    //loadPage取第几页数据\r\n    var loadPage;\r\n    if (!page) {\r\n      loadPage = pagination.page + 1;\r\n    } else {\r\n      loadPage = page;\r\n    }\r\n    actions.getIndexList(loadPage, pagination.limit, tab).then((success) => {\r\n      if (success) {\r\n        //查询成功\r\n        actions.setCurrPage(loadPage);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n     * 在组件接收到新的 props 的时候调用。在初始化渲染的时候，该方法不会调用。\r\n     * @param np\r\n     */\r\n  componentWillReceiveProps(np) {\r\n    var {location} = np;\r\n    var {pathname, search} = location;\r\n    var path = pathname + search;\r\n    if (this.path !== path) {\r\n      //切换tab\r\n      this.changeTab();\r\n      //加载第一页数据\r\n      this.loadData(np, 1);\r\n    }\r\n    this.initPath(np);\r\n  }\r\n\r\n  /**\r\n     * 在接收到新的 props 或者 state，将要渲染之前调用。\r\n     * 该方法在初始化渲染的时候不会调用，在使用 forceUpdate 方法的时候也不会。\r\n     * @param nextProps\r\n     * @param nextState\r\n     * @returns {boolean}\r\n     */\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    return true;\r\n  }\r\n\r\n  /**\r\n     * 切换tab执行的方法\r\n     */\r\n  changeTab() {\r\n    const {actions} = this.props;\r\n    //清除列表\r\n    actions.clearIndexList();\r\n  }\r\n\r\n  /**\r\n     * 在组件从 DOM 中移除的时候立刻被调用。\r\n     */\r\n  componentWillUnmount() {\r\n    const {actions} = this.props;\r\n    //设置滚动条的位置，使返回的时候可以恢复\r\n    actions.setScrollPos({\r\n      scrollX: window.scrollX,\r\n      scrollY: window.scrollY,\r\n    });\r\n    window.removeEventListener('scroll', this.handleScroll);\r\n  }\r\n  render() {\r\n    //let tab = this.props.location.query.tab || 'all';\r\n    let tab = (this.props.location.search || 'all').replace(/\\?tab=/, '');\r\n    const {list, loadState, loadFailed, msg} = this.props;\r\n    return (\r\n      <div>\r\n        <Nav tab={tab}></Nav>\r\n        <List list={list}></List>\r\n        <DataLoad loadingData={loadState} loadFailed={loadFailed} msg={msg}></DataLoad>\r\n        <Footer index=\"0\"/>\r\n      </div>\r\n\r\n    );\r\n  }\r\n}\r\nconst mapStateToProps = state => {\r\n  return {\r\n    list: state.list.indexList,\r\n    pagination: state.pagination.pagination,\r\n    loadState: state.load.loadState,\r\n    loadFailed: state.load.loadFailed,\r\n    msg: state.load.msg,\r\n  };\r\n};\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  actions: bindActionCreators(Object.assign({}, listAction, pageAction), dispatch),\r\n});\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ListApp);\r\nListApp.contextTypes = {\r\n  router: PropTypes.object,\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/containers/listApp/index.js","import {Tool} from '../util/tool';\r\nimport * as types from '../constants/ActionTypes';\r\nimport ajax from '../components/ajax';\r\n\r\n/**\r\n * 用户登录\r\n * @param accesstoken\r\n * @returns {Function}\r\n */\r\nexport function login(accesstoken) {\r\n  return function(dispatch, getState) {\r\n    return ajax(dispatch, {\r\n      method: 'post', //请求类型\r\n      url: types.ACTION_PREFIX + '/api/v1/accesstoken/',\r\n      needLoad:false, //不要加载动画\r\n      data: {'accesstoken':accesstoken}, //发送给服务器的数据\r\n      success: function(ret) {\r\n        //登录成功，将用户信息存入localStorage，保存accesstoken\r\n        ret.data.accesstoken = accesstoken;\r\n        saveUser(ret.data);\r\n        alert('登录成功');\r\n      }, //请求成功后执行的方法\r\n      error: function(error) {\r\n        alert(error.data.error_msg);\r\n      }, //请求失败后执行的方法\r\n    });\r\n  };\r\n}\r\n/**\r\n * 保存用户信息到localStorage\r\n * @param user\r\n */\r\nfunction saveUser(user) {\r\n  Tool.localItem('User', JSON.stringify(user));\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/actions/login.js","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './index.less';\r\n/**\r\n * 登录部分\r\n */\r\nexport class Login extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n  handleClick(e) {\r\n    const {loginClick} = this.props;\r\n    var accesstoken = this.refs.accesstoken.value;\r\n    if (!accesstoken) {\r\n      return alert('accesstoken不能为空');\r\n    }\r\n    loginClick(accesstoken);\r\n    return null;\r\n  }\r\n  render() {\r\n    const {btnName} = this.props;\r\n    return (\r\n      <div className=\"signin\">\r\n        <div className=\"center\">\r\n          <div className=\"text\"><input ref=\"accesstoken\" \r\n            type=\"text\" placeholder=\"Access Token\" /></div>\r\n          <button className=\"btn\" \r\n            onClick={(e) => this.handleClick(e)}>{btnName}</button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nLogin.propTypes = {\r\n  btnName: PropTypes.string.isRequired,  //按钮名称\r\n  loginClick: PropTypes.func.isRequired,  //登录回调事件\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/components/login/index.js","import React, {Component} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport * as loginAction from '../../actions/login';\r\nimport {Header} from '../../components/common';\r\nimport {Login} from '../../components/login';\r\nimport {Tool} from '../../util/tool';\r\nimport PropTypes from 'prop-types';\r\nclass LoginApp extends Component {\r\n  constructor(props, context) {\r\n    super(props, context);\r\n  }\r\n\r\n  componentDidMount() {\r\n  }\r\n\r\n  /**\r\n     * 在组件接收到新的 props 的时候调用。在初始化渲染的时候，该方法不会调用。\r\n     * @param np\r\n     */\r\n  componentWillReceiveProps(np) {\r\n  }\r\n\r\n  /**\r\n     * 在接收到新的 props 或者 state，将要渲染之前调用。\r\n     * 该方法在初始化渲染的时候不会调用，在使用 forceUpdate 方法的时候也不会。\r\n     * @param nextProps\r\n     * @param nextState\r\n     * @returns {boolean}\r\n     */\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    return true;\r\n  }\r\n\r\n  /**\r\n     * 在组件从 DOM 中移除的时候立刻被调用。\r\n     */\r\n  componentWillUnmount() {\r\n  }\r\n\r\n  handleLogin(accesstoken) {\r\n    const {actions} = this.props;\r\n    this.setState({ button: '登录中...' });\r\n    actions.login(accesstoken).then((success) => {\r\n      if (success) {\r\n        //登录成功\r\n        this.props.history.push('/user/' + JSON.parse(Tool.localItem('User')).loginname);\r\n      } else {\r\n        //失败，按钮恢复为登录\r\n        this.setState({ button: '登录' });\r\n      }\r\n    });\r\n  }\r\n\r\n    //定义私有状态，按钮名称\r\n    state = {\r\n      button: '登录',\r\n    }\r\n    render() {\r\n      return (\r\n        <div>\r\n          <Header title=\"登录\" leftIcon=\"fanhui\"/>\r\n          <Login btnName={this.state.button} loginClick={(accesstoken) => this.handleLogin(accesstoken)}></Login>\r\n        </div>\r\n        \r\n      );\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n  return {};\r\n};\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  actions: bindActionCreators(Object.assign({}, loginAction), dispatch),\r\n});\r\nexport default  connect(mapStateToProps, mapDispatchToProps)(LoginApp);\r\nLoginApp.contextTypes = {\r\n  router: PropTypes.object,\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/containers/loginApp/index.js","import React, {Component} from 'react';\r\nimport './index.less';\r\nimport PropTypes from 'prop-types';\r\n/**\r\n * 登录部分\r\n */\r\nexport class LoginOut extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n  loginOut() {\r\n    const {loginOut} = this.props;\r\n    loginOut();\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"signin\" data-flex=\"dir:top main:center cross:center\">\r\n        <div className=\"center\">\r\n          <button className=\"btn btn-red\" \r\n            onClick={() => this.loginOut()}>确认退出登录？</button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nLoginOut.propTypes = {\r\n  loginOut: PropTypes.func.isRequired,  //登出回调事件\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/components/loginout/index.js","import React, {Component} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport {Header} from '../../components/common';\r\nimport {LoginOut} from '../../components/loginout';\r\nimport {Tool} from '../../util/tool';\r\nimport PropTypes from 'prop-types';\r\nclass LoginOutApp extends Component {\r\n  constructor(props, context) {\r\n    super(props, context);\r\n  }\r\n\r\n  componentDidMount() {\r\n  }\r\n\r\n  /**\r\n     * 在组件接收到新的 props 的时候调用。在初始化渲染的时候，该方法不会调用。\r\n     * @param np\r\n     */\r\n  componentWillReceiveProps(np) {\r\n  }\r\n\r\n  /**\r\n     * 在接收到新的 props 或者 state，将要渲染之前调用。\r\n     * 该方法在初始化渲染的时候不会调用，在使用 forceUpdate 方法的时候也不会。\r\n     * @param nextProps\r\n     * @param nextState\r\n     * @returns {boolean}\r\n     */\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    return true;\r\n  }\r\n\r\n  /**\r\n     * 在组件从 DOM 中移除的时候立刻被调用。\r\n     */\r\n  componentWillUnmount() {\r\n  }\r\n\r\n  handleLoginout() {\r\n    Tool.removeLocalItem('User');\r\n    this.props.history.push('/');\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Header title=\"退出登录\" leftIcon=\"fanhui\"/>\r\n        <LoginOut loginOut={() => this.handleLoginout()}></LoginOut>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nconst mapStateToProps = state => {\r\n  return {};\r\n};\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  dispatch: dispatch,\r\n});\r\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginOutApp);\r\nLoginOutApp.contextTypes = {\r\n  router: PropTypes.object,\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/containers/logoutApp/index.js","import * as types from '../constants/ActionTypes';\r\nimport ajax from '../components/ajax';\r\n\r\n/**\r\n * 设置消息集合\r\n * @param accesstoken\r\n * @returns {Function}\r\n */\r\nexport function getUserInfo(accesstoken) {\r\n  return function(dispatch, getState) {\r\n    return ajax(dispatch, {\r\n      method: 'get', //请求类型\r\n      url: types.ACTION_PREFIX + '/api/v1/messages?accesstoken=' + accesstoken,\r\n      success: function(ret) {\r\n        //把已读消息和未读消息合并\r\n        let messageList = ret.data.data.has_read_messages\r\n          .concat(ret.data.data.hasnot_read_messages);\r\n        dispatch(setUserInfo(messageList));\r\n      }, //请求成功后执行的方法\r\n      error: function(error) {\r\n        alert(error.data.error_msg);\r\n      }, //请求失败后执行的方法\r\n    });\r\n  };\r\n}\r\nexport function setUserInfo(data) {\r\n  return {\r\n    type: types.SET_MESSAGE,\r\n    data,\r\n  };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/actions/message.js","import React, {Component} from 'react';\r\nimport {Tool} from '../../util/tool';\r\nimport {UserHeadImg} from '../common';\r\nimport {Link} from 'react-router-dom';\r\nimport './index.less';\r\nimport PropTypes from 'prop-types';\r\n\r\n/**\r\n * 消息内容\r\n *\r\n * @class Content\r\n * @extends {Component}\r\n */\r\nexport class Message extends Component {\r\n  render() {\r\n    var {list} = this.props;\r\n    return (\r\n      <div className=\"msg-box\">\r\n        <ul className=\"list\">\r\n          {\r\n            list.map((item, index) => {\r\n              var {type, author, topic, reply, has_read} = item;\r\n              var content = null;\r\n\r\n              if (type == 'at') {\r\n                content = <div>在话题<Link \r\n                  to={`/topic/${topic.id}`}>{topic.title}</Link>中 @了你</div>;\r\n              } else {\r\n                content = <div>回复你了的话题<Link \r\n                  to={`/topic/${topic.id}`}>{topic.title}</Link></div>;\r\n              }\r\n              return (\r\n                <li key={index}>\r\n                  <Link className=\"user\" to={`/user/${author.loginname}`}>\r\n                    <UserHeadImg url={author.avatar_url}/>\r\n                  </Link>\r\n                  <div className=\"message-content\">\r\n                    <div className=\"name\">{author.loginname}\r\n                      <time>{Tool.formatDate(reply.create_at) }</time>\r\n                    </div>\r\n                    <div>\r\n                      <div>\r\n                        <div className={`dian-${has_read}`}></div>\r\n                      </div>\r\n                      {content}\r\n                    </div>\r\n                  </div>\r\n                </li>\r\n              );\r\n            })\r\n          }\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nMessage.propTypes = {\r\n  list: PropTypes.array.isRequired,  //消息集合\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/components/message/index.js","import React, {Component} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport * as messageAction from '../../actions/message';\r\nimport * as listAction from '../../actions/indexList';\r\nimport * as pageAction from '../../actions/pagination';\r\nimport {Header, DataLoad, Footer, TipMsgSignin} from '../../components/common';\r\nimport {Message} from '../../components/message';\r\nimport {Tool} from '../../util/tool';\r\nimport PropTypes from 'prop-types';\r\nclass MessageApp extends Component {\r\n  constructor(props, context) {\r\n    super(props, context);\r\n  }\r\n  /**\r\n     * 页面初始化渲染完成之后执行加载数据\r\n     */\r\n  componentDidMount() {\r\n    const {actions} = this.props;\r\n    var User = JSON.parse(Tool.localItem('User'));\r\n    if (!User) {\r\n\r\n    } else {\r\n      actions.getUserInfo(User.accesstoken).then((success) => {\r\n        if (success) {\r\n          //查询成功\r\n        } else {\r\n          //失败，暂时没考虑\r\n        }\r\n      });\r\n    }\r\n    actions.clearIndexList();\r\n    actions.setCurrPage(0);\r\n\r\n  }\r\n\r\n  /**\r\n     * 在组件接收到新的 props 的时候调用。在初始化渲染的时候，该方法不会调用。\r\n     * @param np\r\n     */\r\n  componentWillReceiveProps(np) {\r\n  }\r\n\r\n  /**\r\n     * 在接收到新的 props 或者 state，将要渲染之前调用。\r\n     * 该方法在初始化渲染的时候不会调用，在使用 forceUpdate 方法的时候也不会。\r\n     * @param nextProps\r\n     * @param nextState\r\n     * @returns {boolean}\r\n     */\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    return true;\r\n  }\r\n\r\n  /**\r\n     * 在组件从 DOM 中移除的时候立刻被调用。\r\n     */\r\n  componentWillUnmount() {\r\n  }\r\n\r\n\r\n  render() {\r\n    var {data, loadState, loadFailed, msg} = this.props;\r\n    var User = JSON.parse(Tool.localItem('User'));\r\n    var main = null;\r\n    if (!User) {\r\n      main = <TipMsgSignin />;\r\n    } else if (!data) {\r\n      main = <DataLoad loadingData={loadState} loadFailed={loadFailed} msg={msg}></DataLoad>;\r\n    } else {\r\n      main = <Message list={data} />;\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        <Header title=\"消息\" />\r\n        {main}\r\n        <Footer index=\"2\" />\r\n      </div>\r\n    );\r\n  }\r\n}\r\nconst mapStateToProps = state => {\r\n  return {\r\n    data: state.messages.messages,\r\n    loadState: state.load.loadState,\r\n    loadFailed: state.load.loadFailed,\r\n    msg: state.load.msg,\r\n  };\r\n};\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  actions: bindActionCreators(Object.assign({}, messageAction, listAction, pageAction), dispatch),\r\n});\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MessageApp);\r\nMessageApp.contextTypes = {\r\n  router: PropTypes.object,\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/containers/messagesApp/index.js","import * as types from '../constants/ActionTypes';\r\nimport ajax from '../components/ajax';\r\n/**\r\n * 获取主体详情\r\n * @param id 主题ID\r\n * @returns {Function}\r\n */\r\nexport function getTopicDetail(id) {\r\n  return function(dispatch, getState) {\r\n    return ajax(dispatch, {\r\n      method: 'get', //请求类型\r\n      url: types.ACTION_PREFIX + '/api/v1/topic/' + id,\r\n      success: function(ret) {\r\n        dispatch(setTopicDetail(ret.data.data));\r\n      }, //请求成功后执行的方法\r\n      error: function(error) {\r\n        alert(error.data.error_msg);\r\n      }, //请求失败后执行的方法\r\n    });\r\n  };\r\n}\r\nexport function setTopicDetail(data) {\r\n  return {\r\n    type: types.SET_TOPIC,\r\n    data,\r\n  };\r\n}\r\n/**\r\n * 设置replybox是否显示\r\n * @param data  {index,block|none}\r\n * @returns {{type: *, data: *}}\r\n */\r\nexport function setReplybox(data) {\r\n  return {\r\n    type: types.SET_REPLYBOX_DISPLAY,\r\n    data,\r\n  };\r\n}\r\n/**\r\n * 点赞\r\n */\r\nexport function setClickZan(id, accesstoken, index, uid) {\r\n  return function(dispatch, getState) {\r\n    return ajax(dispatch, {\r\n      method: 'post', //请求类型\r\n      url: types.ACTION_PREFIX + '/api/v1/reply/' + id + '/ups',\r\n      needLoad:false, //不要加载动画\r\n      data:{'accesstoken':accesstoken},\r\n      success: function(ret) {\r\n        dispatch(setZan({\r\n          action:ret.data.action,\r\n          uid:uid,\r\n          index:index,\r\n        }));\r\n      }, //请求成功后执行的方法\r\n      error: function(error) {\r\n        alert(error.data.error_msg);\r\n      }, //请求失败后执行的方法\r\n    });\r\n  };\r\n}\r\nexport function setZan(data) {\r\n  return {\r\n    type: types.SET_ZAN,\r\n    data,\r\n  };\r\n}\r\n/**\r\n * 回复\r\n */\r\nexport function submitReply(data) {\r\n  return function(dispatch, getState) {\r\n    return ajax(dispatch, {\r\n      method: 'post', //请求类型\r\n      url: types.ACTION_PREFIX + '/api/v1/topic/' + data.id + '/replies',\r\n      data:{'accesstoken':data.accesstoken, \r\n        'reply_id ':data.reply_id, 'content':data.content},\r\n      needLoad:false, //不要加载动画\r\n      success: function(ret) {\r\n        alert('回复成功');\r\n      }, //请求成功后执行的方法\r\n      error: function(error) {\r\n        alert(error.data.error_msg);\r\n      }, //请求失败后执行的方法\r\n    });\r\n  };\r\n}\r\n/**\r\n * 添加主题\r\n */\r\nexport function createTopic(data) {\r\n  return function(dispatch, getState) {\r\n    return ajax(dispatch, {\r\n      method: 'post', //请求类型\r\n      url: types.ACTION_PREFIX + '/api/v1/topics',\r\n      data:data,\r\n      needLoad:false, //不要加载动画\r\n      success: function(ret) {\r\n      }, //请求成功后执行的方法\r\n      error: function(error) {\r\n        alert(error.data.error_msg);\r\n      }, //请求失败后执行的方法\r\n    });\r\n  };\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/actions/topic.js","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\n/**\r\n * 回复框\r\n *\r\n * @class ReplyBox\r\n * @extends {Component}\r\n */\r\nexport class ReplyBox extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n  handleClick(e) {\r\n    /*const {submit} = this.props;\r\n        var accesstoken = this.refs.accesstoken.value;\r\n        submit(accesstoken);*/\r\n    //data  {accesstoken id reply_id}\r\n    const {data, loginname, submit} = this.props;\r\n    //this.state = { btnname: '提交中...' }\r\n    //var data = this.props.data;\r\n    if (data.reply_id) {\r\n      data.content = `[@${loginname}](/user/${loginname}) ${this.refs.content.value}`;\r\n    } else {\r\n      data.content = this.refs.content.value;\r\n    }\r\n    if (data.content == '') {\r\n      return alert('回复内容不能为空！');\r\n    }\r\n    //打标，暂时不打\r\n    //data.content += '<br><br>来自疯狂的<a href=\"#\" target=\"_blank\">react-cnode</a>';\r\n    /*Tool.post(`/api/v1//topic/${data.id}/replies`, data, (res) => {\r\n            this.setState({ btnname: '回复成功，刷新页面中..' });\r\n            this.refs.content.value = '';\r\n            Tool.get(`/api/v1//topic/${data.id}`, {}, (res) => {\r\n                this.props.reLoadData(res.data); //刷新页面\r\n                this.setState({ btnname: '回复' });\r\n            }, () => {\r\n                this.state = { btnname: '刷新失败，请手动刷新试试' }\r\n            });\r\n\r\n        }, (res) => {\r\n            this.setState({ btnname: '回复失败' });\r\n        });*/\r\n    /**\r\n         * submit提交回复内容的方法\r\n         * data参数的结构{accesstoken id reply_id content}\r\n         */\r\n    submit(data);\r\n  }\r\n  render() {\r\n    var { display, placeholder} = this.props;\r\n    return (\r\n      <div className=\"reply-box\" style={{ display: display }}>\r\n        <div className=\"text\"><textarea ref=\"content\" placeholder={placeholder}></textarea></div>\r\n        <div className=\"reply-btn\">\r\n          <button className=\"btn\" onClick={(e) => this.handleClick(e)}>回复</button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nReplyBox.propTypes = {\r\n  display: PropTypes.string,  //css display\r\n  placeholder: PropTypes.string,  //placeholder\r\n  loginname: PropTypes.string,  //登录用户名\r\n  data: PropTypes.object,  //{accesstoken id reply_id} id为当前topic的id\r\n  submit: PropTypes.func,  //提交回复的方法\r\n\r\n};\r\n/*ReplyBox.defaultProps = {\r\n    display: 'block',\r\n    placeholder: '回复支持Markdown语法,请注意标记代码'\r\n};*/\r\nReplyBox.contextTypes = {\r\n  router: PropTypes.object,\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/components/topic/replyBox.js","import React, {Component} from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport {Tool} from '../../util/tool';\r\nimport {UserHeadImg} from '../common';\r\nimport {ReplyBox} from './replyBox';\r\nimport PropTypes from 'prop-types';\r\n/**\r\n * 回复列表\r\n *\r\n * @class ReList\r\n * @extends {Component}\r\n */\r\nexport class ReList extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n    /**\r\n     * 验证回复项目是否点赞\r\n     *\r\n     * @param {Array} arr\r\n     * @returns\r\n     */\r\n    isUp = (arr) => {\r\n      var {User} = this.props;\r\n      var id = User ? User.id : '';\r\n      for (let i = 0; i < arr.length; i++) {\r\n        if (arr[i] === id) {return true;}\r\n      }\r\n      return false;\r\n    }\r\n\r\n    /**\r\n     * 点赞的处理事件\r\n     * @param id\r\n     * @param index\r\n     * @param loginname\r\n     */\r\n    handleClickZan(id, index, loginname) {\r\n      const {clickZan} = this.props;\r\n      clickZan(id, index, loginname);\r\n    }\r\n\r\n    /**\r\n     * 展示回复框\r\n     * @param index\r\n     */\r\n    showReplyBox(index) {\r\n      const {showReplyBox} = this.props;\r\n      showReplyBox(index);\r\n    }\r\n\r\n    render() {\r\n      var {User, list, submit} = this.props;\r\n      var accesstoken = User ? User.accesstoken : '';\r\n      return (\r\n        <ul className=\"re-list\">\r\n          {\r\n            list.map((item, index) => {\r\n              var {id, content, author, ups, create_at, display} = item;\r\n              if (!display) {\r\n                display = 'none';\r\n              }\r\n              var at = new Date(create_at);\r\n              var upState = this.isUp(ups);\r\n              var createMarkup = () => {\r\n                return {\r\n                  __html: content,\r\n                };\r\n              };\r\n              return (\r\n                <li key={index}>\r\n                  <div className=\"headimg\">\r\n                    <UserHeadImg url={author.avatar_url}/>\r\n                  </div>\r\n                  <div className=\"main\">\r\n                    <div className=\"top\">\r\n                      <Link to={'/user/' + author.loginname}\r\n                        className=\"name\">{author.loginname}</Link>\r\n                      <time>{Tool.formatDate(create_at) }</time>\r\n                      <div className=\"lou\">#{++index}</div>\r\n                    </div>\r\n                    <div className=\"content\" dangerouslySetInnerHTML={createMarkup() }></div>\r\n                    <div className=\"bottom\">\r\n                      <div className={`font font-${upState}`} onClick={() => this.handleClickZan(id, index, author.loginname)}>\r\n                        <i className=\"iconfont icon-dianzan \"></i>\r\n                        <em>{ups.length ? ups.length : ''}</em>\r\n                      </div>\r\n                      <div className=\"font\" onClick={() => this.showReplyBox(index)}>\r\n                        <i className=\"iconfont icon-huifu\"></i>\r\n                      </div>\r\n                    </div>\r\n                    <ReplyBox placeholder={`@${author.loginname}`} submit={submit}\r\n                      display={display} loginname={author.loginname}\r\n                      data={{ accesstoken, id: this.props.id, reply_id: id }}/>\r\n                  </div>\r\n                </li>\r\n              );\r\n            })\r\n          }\r\n        </ul>\r\n      );\r\n    }\r\n}\r\nReList.propTypes = {\r\n  User: PropTypes.object,  //登录用户\r\n  id: PropTypes.string,  //主题ID\r\n  clickZan: PropTypes.func,  //点赞事件\r\n  showReplyBox: PropTypes.func,  //展示回复框事件\r\n  list: PropTypes.array,  //回复集合\r\n  submit: PropTypes.func,  //提交回复的方法\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/components/topic/reList.js","import React, {Component} from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport {Tool} from '../../util/tool';\r\nimport {UserHeadImg, TabIcon, TipMsgSignin} from '../common';\r\nimport {ReList} from './reList';\r\nimport {ReplyBox} from './replyBox';\r\nimport './index.less';\r\nimport PropTypes from 'prop-types';\r\n/**\r\n * 文章主体部分\r\n *\r\n * @class Article\r\n * @extends {Component}\r\n */\r\nexport class Article extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  render() {\r\n    var {id, title, create_at, visit_count, reply_count, content, replies, author, User, submit, clickZan, showReplyBox} = this.props;\r\n    /*react innerHtml*/\r\n    var createMarkup = () => {\r\n      return {\r\n        __html: content,\r\n      };\r\n    };\r\n    var bottom = User ? <ReplyBox display=\"block\" placeholder=\"回复支持Markdown语法,请注意标记代码\" submit={submit}\r\n      data={{ accesstoken: User.accesstoken, id }}/> : <TipMsgSignin />;\r\n\r\n    return (\r\n      <div className=\"topic\">\r\n        <div className=\"user\">\r\n          <div className=\"headimg\">\r\n            <UserHeadImg url={author.avatar_url}/>\r\n          </div>\r\n          <div className=\"data\">\r\n            <div>\r\n              <Link to={'/user/' + author.loginname} className=\"name\">{author.loginname}</Link>\r\n              <time data-flex-box=\"1\">{Tool.formatDate(create_at) }</time>\r\n\r\n              <div className=\"font\"><TabIcon {...this.props} /></div>\r\n            </div>\r\n            <div className=\"qt\">\r\n              <div>阅读：{visit_count}</div>\r\n              <div>回复：{reply_count}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <h2 className=\"tit2\">{title}</h2>\r\n        <div className=\"content\" dangerouslySetInnerHTML={createMarkup() }/>\r\n        <h3 className=\"tit3\">共<em>{replies.length}</em>条回复</h3>\r\n        <ReList submit={submit} id={id} list={replies} User={User} clickZan={clickZan}\r\n          showReplyBox={showReplyBox}/>\r\n        {bottom}\r\n      </div>\r\n    );\r\n  }\r\n}\r\nReList.propTypes = {\r\n  id: PropTypes.string,  //主题ID\r\n  title: PropTypes.string,  //主题标题\r\n  create_at: PropTypes.string,  //创建时间\r\n  visit_count: PropTypes.number,  //访问量\r\n  reply_count: PropTypes.number,  //回复量\r\n  content: PropTypes.string,  //主题内容\r\n  replies: PropTypes.array,  //回复列表\r\n  author: PropTypes.object,  //作者信息\r\n  User: PropTypes.object,  //登录用户\r\n  clickZan: PropTypes.func,  //点赞\r\n  showReplyBox: PropTypes.func,  //展示回复框\r\n  submit: PropTypes.func, //提交回复内容\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/components/topic/index.js","import React, {Component} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport * as topicAction from '../../actions/topic';\r\nimport {DataLoad, Header} from '../../components/common';\r\nimport {Article} from '../../components/topic';\r\nimport {Tool} from '../../util/tool';\r\nimport PropTypes from 'prop-types';\r\nclass TopicApp extends Component {\r\n    //定义私有状态，用于设置回复后重新加载，给滚动条定位\r\n    state = {\r\n      page: {\r\n        scrollX: 0,\r\n        scrollY: 0,\r\n      },\r\n    };\r\n    constructor(props, context) {\r\n      super(props, context);\r\n    }\r\n\r\n    componentDidMount() {\r\n      const id = this.props.match.params.id;\r\n      this.loadData(id);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param id[topicId]\r\n     * @param isReload[bool]是否是重新加载，如果重新加载，就要滚动到指定位置\r\n     */\r\n    loadData(id, isReload) {\r\n      const {actions} = this.props;\r\n      actions.getTopicDetail(id).then((success) => {\r\n        if (success) {\r\n          if (isReload) {\r\n            //滚动到指定位置\r\n            window.scrollTo(this.state.page.scrollX, this.state.page.scrollY);\r\n          }\r\n          //查询成功\r\n        } else {\r\n          //失败，暂时没考虑\r\n        }\r\n      });\r\n    }\r\n\r\n    /**\r\n     * 在组件接收到新的 props 的时候调用。在初始化渲染的时候，该方法不会调用。\r\n     * @param np\r\n     */\r\n    componentWillReceiveProps(np) {\r\n    }\r\n\r\n    /**\r\n     * 在接收到新的 props 或者 state，将要渲染之前调用。\r\n     * 该方法在初始化渲染的时候不会调用，在使用 forceUpdate 方法的时候也不会。\r\n     * @param nextProps\r\n     * @param nextState\r\n     * @returns {boolean}\r\n     */\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n      return true;\r\n    }\r\n\r\n    /**\r\n     * 在组件从 DOM 中移除的时候立刻被调用。\r\n     */\r\n    componentWillUnmount() {\r\n    }\r\n\r\n    /**\r\n     * 点赞\r\n     * @param id\r\n     * @param index\r\n     * @param loginname\r\n     */\r\n    clickZan(id, index, loginname) {\r\n      var {topicDetail, actions} = this.props;\r\n      var user = JSON.parse(Tool.localItem('User'));\r\n      var accesstoken = user ? user.accesstoken : '';\r\n      var uid = user ? user.id : '';\r\n      if (!accesstoken) {\r\n        return this.props.history.push('/login'); //跳转到登录\r\n      } else if (user.loginname === loginname) {\r\n        return alert('你不能给自己点赞');\r\n      }\r\n      actions.setClickZan(id, accesstoken, index, uid).then((success) => {\r\n        if (success) {\r\n          //查询成功\r\n          //alert('点赞成功');\r\n        } else {\r\n          //失败，暂时没考虑\r\n        }\r\n      });\r\n\r\n    }\r\n\r\n    /**\r\n     * 展示回复框\r\n     * @param index\r\n     */\r\n    showReplyBox(index) {\r\n      var {topicDetail, actions} = this.props;\r\n      var user = JSON.parse(Tool.localItem('User'));\r\n      var accesstoken = user ? user.accesstoken : '';\r\n      if (!accesstoken) {\r\n        return this.props.history.push('/login'); //跳转到登录\r\n      }\r\n      --index;\r\n      if (topicDetail.replies[index].display === 'block') {\r\n        actions.setReplybox({\r\n          index: index,\r\n          display: 'none',\r\n        });\r\n        //this.props.state.data.replies[index].display = 'none';\r\n      } else {\r\n        //this.props.state.data.replies[index].display = 'block';\r\n        actions.setReplybox({\r\n          index: index,\r\n          display: 'block',\r\n        });\r\n      }\r\n\r\n    }\r\n\r\n    /**\r\n     * submit提交回复内容的方法  (id是主题ID)\r\n     * data参数的结构{accesstoken id reply_id content}\r\n     */\r\n    submit(data) {\r\n      const {dispatch, actions} = this.props;\r\n      actions.submitReply(data).then((success) => {\r\n        if (success) {\r\n          //回复成功，重新加载，先设置滚动条的位置，滚动条位置为私有属性\r\n          this.setState({\r\n            page: {\r\n              scrollX:window.scrollX,\r\n              scrollY:window.scrollY,\r\n            },\r\n          });\r\n          this.loadData(data.id, true);\r\n        } else {\r\n          //失败，暂时没考虑\r\n        }\r\n      });\r\n\r\n\r\n    }\r\n\r\n    render() {\r\n      var {topicDetail, loadState, loadFailed, msg} = this.props;\r\n      //从localStorage中取出User\r\n      var user = JSON.parse(Tool.localItem('User'));\r\n      var main = loadState || loadFailed ? <DataLoad loadingData={loadState} loadFailed={loadFailed} msg={msg}></DataLoad> :\r\n        <Article {...topicDetail} User={user} clickZan={(id, index, loginname) => this.clickZan(id, index, loginname)}\r\n          showReplyBox={(index) => this.showReplyBox(index)}\r\n          submit={(data) => this.submit(data)}/>;\r\n      return (\r\n        <div>\r\n          <Header title=\"详情\" leftIcon=\"fanhui\"/>\r\n          {main}\r\n        </div>\r\n      );\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n  return {\r\n    topicDetail: state.topicDetail.topicDetail,\r\n    loadState: state.load.loadState,\r\n    loadFailed: state.load.loadFailed,\r\n    msg: state.load.msg,\r\n  };\r\n};\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  actions: bindActionCreators(Object.assign({}, topicAction), dispatch),\r\n});\r\nexport default  connect(mapStateToProps, mapDispatchToProps)(TopicApp);\r\nTopicApp.contextTypes = {\r\n  router: PropTypes.object,\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/containers/topicApp/index.js","import React, {Component} from 'react';\r\nimport './index.less';\r\nimport PropTypes from 'prop-types';\r\n/**\r\n * 新的主题\r\n */\r\nexport class NewTopic extends Component {\r\n  render() {\r\n    var { tab, title, content, tabInput, titleInput, contentInput} = this.props;\r\n    return (\r\n      <div className=\"topic-create\">\r\n        <div className=\"item\">\r\n          <select name=\"tab\" defaultValue={tab} onInput={tabInput}>\r\n            <option value=\"\">请选择发表类型</option>\r\n            <option value=\"share\">分享</option>\r\n            <option value=\"ask\">问答</option>\r\n            <option value=\"job\">招聘</option>\r\n          </select>\r\n        </div>\r\n        <div className=\"item\">\r\n          <input type=\"text\" defaultValue={title} onInput={titleInput} placeholder=\"标题字数 10 字以上\" />\r\n        </div>\r\n        <div className=\"item\">\r\n          <textarea defaultValue={content} onInput={contentInput} placeholder=\"内容字数 30 字以上\"></textarea>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nNewTopic.propTypes = {\r\n  tabInput: PropTypes.func,  //选择标题回调函数\r\n  titleInput: PropTypes.func,  //输入标题回调函数\r\n  contentInput: PropTypes.func,  //输入回调函数\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/components/topicCreate/index.js","import React, {Component} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport * as topicAction from '../../actions/topic';\r\nimport * as listAction from '../../actions/indexList';\r\nimport * as pageAction from '../../actions/pagination';\r\nimport {Header, Footer, TipMsgSignin} from '../../components/common';\r\nimport {NewTopic} from '../../components/topicCreate';\r\nimport {Tool} from '../../util/tool';\r\nimport PropTypes from 'prop-types';\r\nclass TopicCreateApp extends Component {\r\n  constructor(props, context) {\r\n    super(props, context);\r\n  }\r\n\r\n  /**\r\n     * 页面初始化渲染完成之后执行加载数据\r\n     */\r\n  componentDidMount() {\r\n    const {actions} = this.props;\r\n    actions.clearIndexList();\r\n    actions.setCurrPage(0);\r\n  }\r\n    state = {\r\n      title: '',\r\n      tab: '',\r\n      content: '',\r\n      accesstoken:'',\r\n    }\r\n\r\n    /**\r\n     * 在组件接收到新的 props 的时候调用。在初始化渲染的时候，该方法不会调用。\r\n     * @param np\r\n     */\r\n    componentWillReceiveProps(np) {\r\n    }\r\n\r\n    /**\r\n     * 在接收到新的 props 或者 state，将要渲染之前调用。\r\n     * 该方法在初始化渲染的时候不会调用，在使用 forceUpdate 方法的时候也不会。\r\n     * @param nextProps\r\n     * @param nextState\r\n     * @returns {boolean}\r\n     */\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n      return false;\r\n    }\r\n\r\n    /**\r\n     * 在组件从 DOM 中移除的时候立刻被调用。\r\n     */\r\n    componentWillUnmount() {\r\n    }\r\n\r\n    /**\r\n     * 监听用户选择发表类型\r\n     *\r\n     * @param {Object} e 事件出发的元素\r\n     */\r\n    tabInput = (e) => {\r\n      this.state.tab = e.target.value;\r\n    }\r\n\r\n    /**\r\n     * 监听用户输入标题\r\n     *\r\n     * @param {Object} e //事件触发的元素\r\n     */\r\n    titleInput = (e) => {\r\n      this.state.title = e.target.value;\r\n    }\r\n\r\n    /**\r\n     * 监听用户输入内容\r\n     *\r\n     * @param {Object} e //事件触发的元素\r\n     */\r\n    contentInput = (e) => {\r\n      this.state.content = e.target.value;\r\n    }\r\n    rightClick = () => {\r\n      const {actions} = this.props;\r\n      if (!this.state.tab) {\r\n        return alert('请选择发表类型');\r\n      } else if (this.state.title.length < 10) {\r\n        return alert('标题字数10字以上');\r\n      } else if (this.state.content.length < 30) {\r\n        return alert('内容字数30字以上');\r\n      }\r\n      var User = JSON.parse(Tool.localItem('User'));\r\n      this.state.accesstoken = User.accesstoken;\r\n      actions.createTopic(this.state).then((ret) => {\r\n        if (ret) {\r\n          //成功\r\n          this.props.history.push('/topic/' + ret.data.topic_id);\r\n        } else {\r\n          //失败\r\n        }\r\n      });\r\n\r\n    }\r\n\r\n    render() {\r\n      //var {data, params, loadState, loadFailed, msg} = this.props;\r\n      var User = JSON.parse(Tool.localItem('User'));\r\n      var headerSet = {};\r\n      var main = null;\r\n      if (!User) {\r\n        main = <TipMsgSignin />;\r\n      } else {\r\n        main = <NewTopic {...this.state} tabInput={this.tabInput} titleInput={this.titleInput}\r\n          contentInput={this.contentInput}/>;\r\n        headerSet = {\r\n          rightIcon: 'fabu',\r\n          rightClick: this.rightClick,\r\n        };\r\n      }\r\n      return (\r\n        <div>\r\n          <Header title=\"发表主题\" {...headerSet} />\r\n          {main}\r\n          <Footer index=\"1\"/>\r\n        </div>\r\n      );\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n  return {\r\n\r\n  };\r\n};\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  actions: bindActionCreators(Object.assign({}, topicAction, listAction, pageAction), dispatch),\r\n});\r\nexport default connect(mapStateToProps, mapDispatchToProps)(TopicCreateApp);\r\nTopicCreateApp.contextTypes = {\r\n  router: PropTypes.object,\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/containers/topicCreateApp/index.js","import * as types from '../constants/ActionTypes';\r\nimport ajax from '../components/ajax';\r\n\r\n/**\r\n * 获取用户信息\r\n * @param loginname 用户名\r\n * @returns {Function}\r\n */\r\nexport function getUserInfo(loginname) {\r\n  return function(dispatch, getState) {\r\n    return ajax(dispatch, {\r\n      method: 'get', //请求类型\r\n      url: types.ACTION_PREFIX + '/api/v1/user/' + loginname,\r\n      success: function(ret) {\r\n        dispatch(setUserInfo(ret.data.data));\r\n      }, //请求成功后执行的方法\r\n      error: function(error) {\r\n        alert(error.data.error_msg);\r\n      }, //请求失败后执行的方法\r\n    });\r\n  };\r\n}\r\nexport function setUserInfo(data) {\r\n  return {\r\n    type: types.SET_USERINFO,\r\n    data,\r\n  };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/actions/userInfo.js","import React, {Component} from 'react';\r\nimport {Tool} from '../../util/tool';\r\nimport {Link} from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\n/**\r\n * 发布的主题和回复的主题列表\r\n *\r\n * @class HomeList\r\n * @extends {Component}\r\n */\r\nexport class HomeList extends Component {\r\n  render() {\r\n    const {list, display} = this.props;\r\n    return (\r\n      <ul className=\"list\" style={{ display: display }}>\r\n        {\r\n          list.map((item, index) => {\r\n            let {id, title, last_reply_at} = item;\r\n            return (\r\n              <li key={index}>\r\n                <Link to={`/topic/${id}`}>\r\n                  <div className=\"tit\">{title}</div>\r\n                  <time className>{Tool.formatDate(last_reply_at) }</time>\r\n                </Link>\r\n              </li>\r\n            );\r\n          })\r\n        }\r\n      </ul>\r\n    );\r\n  }\r\n}\r\nHomeList.propTypes = {\r\n  display: PropTypes.string,  //css display\r\n  list: PropTypes.array,  //列表数据\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/components/user/homeList.js","import React, {Component} from 'react';\r\nimport {Tool} from '../../util/tool';\r\nimport {HomeList} from './homeList';\r\nimport {UserHeadImg} from '../common';\r\nimport './index.less';\r\nimport PropTypes from 'prop-types';\r\n\r\n/**\r\n * 个人主页\r\n *\r\n * @class Home\r\n * @extends {Component}\r\n */\r\nexport class Home extends Component {\r\n    //定义私有状态，用于设置主题和回复的切换\r\n    state = {\r\n      tabIndex:0,\r\n    };\r\n    changeTab(tabIndex) {\r\n      if (this.state.tabIndex === tabIndex) {\r\n        return;\r\n      } else {\r\n        this.setState({\r\n          tabIndex:tabIndex,\r\n        });\r\n      }\r\n\r\n    }\r\n    render() {\r\n      var {avatar_url, loginname, score, recent_topics, recent_replies, create_at} = this.props;\r\n      var {tabIndex} = this.state;\r\n      var arrOn = [];\r\n      var arrDisplay = [];\r\n      arrOn[tabIndex] = 'on';\r\n      arrDisplay[tabIndex] = 'block';\r\n      return (\r\n        <div className=\"user-index\">\r\n          <div className=\"headimg\">\r\n            <UserHeadImg url={avatar_url} />\r\n            <div className=\"name\">{loginname}</div>\r\n            <div className=\"score\">积分：{score}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;注册于：{Tool.formatDate(create_at) }</div>\r\n          </div>\r\n          <ul className=\"tab-nav\">\r\n            <li onClick={ () => this.changeTab(0) } className={arrOn[0]}>主题</li>\r\n            <li onClick={ () => this.changeTab(1) } className={arrOn[1]}>回复</li>\r\n          </ul>\r\n          <HomeList list={recent_topics} display={arrDisplay[0]} />\r\n          <HomeList list={recent_replies} display={arrDisplay[1]} />\r\n        </div>\r\n      );\r\n    }\r\n}\r\nHome.propTypes = {\r\n  avatar_url: PropTypes.string,  //头像地址\r\n  loginname: PropTypes.string,  //头像地址用户名\r\n  score: PropTypes.number,  //积分\r\n  recent_topics: PropTypes.array,  //主题集合\r\n  recent_replies: PropTypes.array,  //回复集合\r\n  create_at: PropTypes.string,  //创建时间\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/components/user/index.js","import React, {Component} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport * as userAction from '../../actions/userInfo';\r\nimport * as listAction from '../../actions/indexList';\r\nimport * as pageAction from '../../actions/pagination';\r\nimport {Header, DataLoad, Footer} from '../../components/common';\r\nimport {Home} from '../../components/user';\r\nimport {Tool} from '../../util/tool';\r\nimport PropTypes from 'prop-types';\r\nclass UserApp extends Component {\r\n  constructor(props, context) {\r\n    super(props, context);\r\n  }\r\n  /**\r\n     * 页面初始化渲染完成之后执行加载数据\r\n     */\r\n  componentDidMount() {\r\n    const {actions} = this.props;\r\n    var loginname = this.props.match.params.loginname;\r\n    actions.getUserInfo(loginname).then((success) => {\r\n      if (success) {\r\n        //查询成功\r\n      } else {\r\n        //失败，暂时没考虑\r\n      }\r\n    });\r\n    actions.clearIndexList();\r\n    actions.setCurrPage(0);\r\n  }\r\n\r\n  /**\r\n     * 在组件接收到新的 props 的时候调用。在初始化渲染的时候，该方法不会调用。\r\n     * @param np\r\n     */\r\n  componentWillReceiveProps(np) {\r\n  }\r\n\r\n  /**\r\n     * 在接收到新的 props 或者 state，将要渲染之前调用。\r\n     * 该方法在初始化渲染的时候不会调用，在使用 forceUpdate 方法的时候也不会。\r\n     * @param nextProps\r\n     * @param nextState\r\n     * @returns {boolean}\r\n     */\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    return true;\r\n  }\r\n\r\n  /**\r\n     * 在组件从 DOM 中移除的时候立刻被调用。\r\n     */\r\n  componentWillUnmount() {\r\n  }\r\n\r\n\r\n  render() {\r\n    var {data, match:{params}, loadState, loadFailed, msg} = this.props;\r\n    var User = JSON.parse(Tool.localItem('User'));\r\n    User = User ? User : {};\r\n    var main = loadState || loadFailed ?\r\n      <DataLoad loadingData={loadState} loadFailed={loadFailed} msg={msg}></DataLoad> : <Home {...data} />;\r\n    var title = params.loginname == User.loginname ? '个人中心' : params.loginname + '的个人中心';\r\n    var footer = params.loginname == User.loginname ? <Footer index=\"3\"/> : null;\r\n    var leftIcon = params.loginname == User.loginname ? null : 'fanhui';\r\n    var rightIcon = params.loginname == User.loginname ? 'tuichu' : null;\r\n    return (\r\n      <div>\r\n        <Header title={title} leftIcon={leftIcon} rightIcon={rightIcon} rightTo=\"/loginout\"/>\r\n        {main}\r\n        {footer}\r\n      </div>\r\n    );\r\n  }\r\n}\r\nconst mapStateToProps = state => {\r\n  return {\r\n    data: state.user.userInfo,\r\n    loadState: state.load.loadState,\r\n    loadFailed: state.load.loadFailed,\r\n    msg: state.load.msg,\r\n  };\r\n};\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  actions: bindActionCreators(Object.assign({}, userAction, listAction, pageAction), dispatch),\r\n});\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UserApp);\r\nUserApp.contextTypes = {\r\n  router: PropTypes.object,\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/containers/userApp/index.js","export default {\r\n  indexList: [],\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/reducers/indexList/initialState.js","export default {\r\n  loadState: false,\r\n  loadFailed:false,\r\n  msg:'',\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/reducers/load/initialState.js","export default {\r\n  topicDetail: {\r\n    author:{},\r\n    replies:[],\r\n  },\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/reducers/topic/initialState.js","export default {\r\n  pagination: {\r\n    page: 0,\r\n    limit: 10,\r\n    scrollX:0,\r\n    scrollY:0,\r\n  },\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/reducers/pagination/initialState.js","export default {\r\n  userInfo:{\r\n    recent_topics:[],\r\n    recent_replies:[],\r\n  },\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/reducers/user/initialState.js","export default {\r\n  messages:[],\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/reducers/messages/initialState.js","import {combineReducers} from 'redux';\r\nimport list from './indexList';\r\nimport load from './load';\r\nimport topicDetail from './topic';\r\nimport pagination from './pagination';\r\nimport user from './user';\r\nimport messages from './messages';\r\n\r\nconst reducers = {\r\n  list,\r\n  topicDetail,\r\n  pagination,\r\n  user,\r\n  messages,\r\n  load,\r\n};\r\n\r\nexport default combineReducers({\r\n  ...reducers,\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/reducers/index.js","import * as types from '../../constants/ActionTypes';\r\nimport initialState from './initialState';\r\n\r\nexport default function(state = initialState, action) {\r\n  switch (action.type) {\r\n    case types.SET_INDEXLIST:\r\n      return Object.assign({}, state, {\r\n        indexList: [\r\n          ...state.indexList,\r\n          ...action.data,\r\n        ],\r\n      });\r\n    case types.CLEAR_INDEXLIST:\r\n      return Object.assign({}, state, {\r\n        indexList: [],\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/reducers/indexList/index.js","import * as types from '../../constants/ActionTypes';\r\nimport initialState from './initialState';\r\n\r\nexport default function(state = initialState, action) {\r\n  switch (action.type) {\r\n    case types.SET_TOPIC:\r\n      return Object.assign({}, state, {\r\n        topicDetail: action.data,\r\n      });\r\n      /**\r\n         * 不直接修改 state 中的字段，而是返回新对象\r\n         */\r\n    case types.SET_REPLYBOX_DISPLAY:\r\n      return Object.assign({}, state, {\r\n        topicDetail:{\r\n          ...state.topicDetail,\r\n          replies: state.topicDetail.replies.map((reply, index) => {\r\n            if (index === action.data.index) {\r\n              return {\r\n                ...reply,\r\n                display:action.data.display,\r\n              };\r\n            }\r\n            return reply;\r\n          }),\r\n        },\r\n      });\r\n\r\n    case types.SET_ZAN:\r\n      return Object.assign({}, state, {\r\n        topicDetail:{\r\n          ...state.topicDetail,\r\n          replies: state.topicDetail.replies.map((reply, index) => {\r\n            if (index === (action.data.index - 1)) {\r\n              var ups = state.topicDetail.replies[index].ups;\r\n              var uid = action.data.uid;\r\n              if (action.data.action === 'down') {\r\n                //取消赞\r\n                for (let i = 0; i < ups.length; i++) {\r\n                  if (ups[i] === uid) {\r\n                    ups.splice(i, 1);\r\n                  }\r\n                }\r\n              } else {\r\n                ups.push(uid);\r\n              }\r\n              return {\r\n                ...reply,\r\n                ups:ups,\r\n              };\r\n            }\r\n            return reply;\r\n          }),\r\n        },\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/reducers/topic/index.js","import * as types from '../../constants/ActionTypes';\r\nimport initialState from './initialState';\r\n\r\nexport default function(state = initialState, action) {\r\n  switch (action.type) {\r\n    case types.SET_CURRENTPAGE:\r\n      return Object.assign({}, state, {\r\n        pagination: {\r\n          ...state.pagination,\r\n          page: action.data,\r\n        },\r\n      });\r\n    case types.SET_SCROLL_POSITION:\r\n      return Object.assign({}, state, {\r\n        pagination: {\r\n          ...state.pagination,\r\n          scrollX:action.data.scrollX,\r\n          scrollY:action.data.scrollY,\r\n        },\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/reducers/pagination/index.js","import * as types from '../../constants/ActionTypes';\r\nimport initialState from './initialState';\r\n\r\nexport default function(state = initialState, action) {\r\n  switch (action.type) {\r\n    case types.SET_USERINFO:\r\n      return Object.assign({}, state, {\r\n        userInfo: action.data,\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/reducers/user/index.js","import * as types from '../../constants/ActionTypes';\r\nimport initialState from './initialState';\r\n\r\nexport default function(state = initialState, action) {\r\n  switch (action.type) {\r\n    case types.SET_MESSAGE:\r\n      return Object.assign({}, state, {\r\n        messages: action.data,\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/reducers/messages/index.js","import * as types from '../../constants/ActionTypes';\r\nimport initialState from './initialState';\r\n\r\nexport default function(state = initialState, action) {\r\n  switch (action.type) {\r\n    case types.SET_DATALOAD:\r\n      return Object.assign({}, state, {\r\n        ...state,\r\n        loadState: action.data,\r\n      });\r\n    case types.SET_LOADFAIL:\r\n      return Object.assign({}, state, {\r\n        ...state,\r\n        loadFailed: action.data,\r\n      });\r\n    case types.SET_LOADMSG:\r\n      return Object.assign({}, state, {\r\n        ...state,\r\n        msg: action.data,\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/reducers/load/index.js","import {createStore, applyMiddleware, compose} from 'redux';\r\nimport thunkMiddleware from 'redux-thunk';\r\nimport reducers from '../reducers';\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nlet middle;\r\nif (process.env.NODE_ENV === 'development') {\r\n  middle = composeEnhancers(applyMiddleware(thunkMiddleware));\r\n} else {\r\n  middle = applyMiddleware(thunkMiddleware);\r\n}\r\n\r\nexport default function configureStore(preloadedState) {\r\n  const store = createStore(\r\n    reducers,\r\n    preloadedState,\r\n    middle\r\n  );\r\n  return store;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/store/index.js","import React from 'react';\r\nimport { Router, Route, Switch } from 'react-router-dom';\r\nimport { Provider } from 'react-redux';\r\n// 由于 antd 组件的默认文案是英文，所以需要修改为中文\r\nimport zhCN from 'antd/lib/locale-provider/zh_CN';\r\nimport { LocaleProvider } from 'antd';\r\nimport moment from 'moment';\r\nimport 'moment/locale/zh-cn';\r\nimport createBrowserHistory from 'history/createBrowserHistory';\r\nimport ListAPP from './containers/listApp';\r\nimport LoginAPP from './containers/loginApp';\r\nimport LogoutAPP from './containers/logoutApp';\r\nimport MessagesApp from './containers/messagesApp';\r\nimport TopicApp from './containers/topicApp';\r\nimport TopicCreateApp from './containers/topicCreateApp';\r\nimport UserApp from './containers/userApp';\r\n\r\nimport configureStore from './store';\r\nimport '../styles/common.less'; //加载公共样式\r\nimport '../styles/animation.less'; //加载公共动画\r\nimport '../assets/iconfont.css'; //字体图标\r\n\r\nmoment.locale('zh-cn');\r\n\r\nconst store = configureStore();\r\nconst history = createBrowserHistory();\r\n\r\n// const HistoryContext = React.createContext(history);\r\n\r\nfunction Main() {\r\n  return (\r\n    <LocaleProvider locale={zhCN}>\r\n      <Provider store={store}>\r\n        <Router history={history}>\r\n          <Switch>\r\n            <Route path=\"/topic/create\" component={TopicCreateApp} />\r\n            <Route path=\"/topic/:id\" component={TopicApp} />\r\n            <Route path=\"/login\" component={LoginAPP} />\r\n            <Route path=\"/loginout\" component={LogoutAPP} />\r\n            <Route path=\"/user/:loginname\" component={UserApp} />\r\n            <Route path=\"/my/messages\" component={MessagesApp} />\r\n            <Route component={ListAPP} />\r\n          </Switch>\r\n        </Router>\r\n      </Provider>\r\n    </LocaleProvider>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/scripts/Main.js","// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\n/*eslint no-console: [\"error\", { allow: [\"warn\", \"error\", \"log\"] }] */\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport default function register() {\r\n  if (process.env.NODE_ENV === 'production' \r\n  ||  process.env.NODE_ENV === 'testing' \r\n  && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. \r\n        // Lets check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n                        'worker. To learn more, visit https://goo.gl/SC7cgQ'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the old content will have been purged and\r\n              // the fresh content will have been added to the cache.\r\n              // It's the perfect time to display a \"New content is\r\n              // available; please refresh.\" message in your web app.\r\n              console.log('New content is available; please refresh.');\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n                response.headers.get('content-type')\r\n                  .indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/registerServiceWorker.js","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Main from './scripts/Main';\nimport registerServiceWorker from './registerServiceWorker';\nReactDOM.render(<Main />, document.getElementById('app'));\n\nregisterServiceWorker();\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}